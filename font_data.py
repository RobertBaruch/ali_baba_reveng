import binascii

from absl import app


def show_char(data: bytes, ch: int) -> list[str]:
    pixel_data: list[str] = [""] * 16
    sprite_data: list[str] = [""] * 16
    data = data[ch * 32 : (ch + 1) * 32]
    for j in range(8):
        sprite_data[j] = f"{data[j]:08b}{data[j+8]:08b}"
    for j in range(8):
        sprite_data[j + 8] = f"{data[j+16]:08b}{data[j+24]:08b}"

    for n, line in enumerate(sprite_data):
        raw = f"{line[9:16]}{line[1:8]}"
        raw = raw[::-1]
        color_set = line[0]
        color01 = "O" if color_set == "1" else "G"
        color10 = "B" if color_set == "1" else "V"
        pixels = list("..............")
        for i in range(0, 14, 2):
            if raw[i : i + 2] == "01":
                pixels[i + 1] = color01
            elif raw[i : i + 2] == "10":
                pixels[i] = color10
        for i in range(13):
            if raw[i : i + 2] == "11":
                pixels[i : i + 2] = "WW"
        for i in range(12):
            if raw[i : i + 3] == "010":
                color = color10 if ((i + 1) % 2) == 0 else color01
                pixels[i + 1] = color
            elif raw[i : i + 3] == "101":
                color = color10 if ((i + 1) % 2) == 1 else color01
                pixels[i + 1] = color

        pixel_data[n] = "".join(pixels)
        # print(f"[[{data[n]:02X} {data[n+8]:02X}]] & ", end="")
        # print(f"[[{data[n]:08b} {data[n+8]:08b}]] & ", end="")
        # print(f"[[{color_set}]] & ", end="")
        # print(f"[[{raw}]] \\\\")

    # print("\\begin{center}")
    # print("\\scalebox{0.8}{")
    # print("\\begin{tabular}{@{}rcccccccccccccc@{}}")
    # for row in range(16):
    #     print(f"{row} ", end="")
    #     for col in range(14):
    #         pixel = pixel_data[row][col]
    #         if pixel == ".":
    #             print("& \\bk0 ", end="")
    #         elif pixel == "B":
    #             print("& \\bl0 ", end="")
    #         elif pixel == "O":
    #             print("& \\bo0 ", end="")
    #         elif pixel == "W":
    #             print("& \\bw0 ", end="")
    #         elif pixel == "G":
    #             print("& \\bg0 ", end="")
    #         elif pixel == "V":
    #             print("& \\bv0 ", end="")
    #     print("\\\\")
    # print("\\end{tabular}")
    # print("}")
    # print("\\end{center}")
    return pixel_data


def main(argv):
    # Data from $83A5 - $92A4.
    hdata = "0000000000000000000000000000000000000000000000000000000000000000787C66667C78606003070C0C07030000637F60607C0C0C0F303F00000F0C0C3CC0C0D0D0D0D4D4D480808282828A8A8A2A22222A08282000151111150405010000040405151505040000000000858585047F4444004060000F1F3F1F0F193000000000000070F8B0000000000000000020222820205008060004010000000106D090D0D0D4919190000000183A604000101050101501010000000A080828000000000F0F7C44447C000078781F11111F1C447010107060001C1107040407030030601C06232E2828000000001155050108080000000000000404000000000000000105055515555500000000004A2A2A55555555050500002A000A0A000000000094D5C1C9D5D4C4008AAAA0A4AA8A8890D4C5D58594D000828AA8AAA88A8200A8A8A0A0AAAAA8A88191D1908595D5D5AAAAA0A0AA8AA8008595D58494D4D00000000E1B595858580000040C3F0C0801587C26277E2626000103060E07060600000000000040626A00181C0E070301002824140501000000000105000000000000001E333330302800001E33330303052A222A28282020001511150505010100000000A0A882A2820000000081818080825654444642000008220A0818100000006079CFD2D4C4D40001273C9A8A888AD090D0C00000000082828200000000008AAA8A88A8A8A8A800959595B9302000A8A8A8A0A080800080A0B1B5959500006078036303060C78070F1C0F0C060301202A282A282A200001150515051501000000000203070FD60000001030383C9AD4C4D4D0D0C000008A888A828280000050404014150565750200000A2A28282975756404909090D4292908088282828A0000000000426A0A000020180E0703010A2A2A2A2A0A0A00151501050000000000A8A00080A2AAA8000081858595D1D5AAA280A0A80000009585858100000000000000007C6E470000000000381D07007C6E470000000000381D070000000000000040407C444444000001011F11111151554440406070004555110101030700000000006666361E000000000C0C0C0E06663E06060600000701000000000000000000006044047F0000000000030E3F04446000000000000E0300000000000000000000D0D4C400000000008AAAA2804454445444500000222A222A220A00007F7F0F23292901297F7F7871656560612909210129017F7F6465656065607F7F7F7F0F07030303037F7F7870606060600303030303037F7F6060606060607F7F00333F1E1E1E7E7E00667E3C3C3C3F3F0E4E4E4E4E4E4E00383A3A3A3A3A3A00003C3B2300030B0300064060006058780001000F00476777007C717300677777003C3B23004B5B730036383C0062787E00190D2F00676777003C39330067777755555555555555552A2A2A2A2A2A2A2A55555555555555552A2A2A2A2A2A2A2A505444445450404002020808020200004155404054040405202A00000A080828404050505054545400000202020A0A0AAAA2A2AA88A8A000959191958485810000848485959585840000000000050505847FC4C4004060000F1F3F1F0F1930000000000000F070600000000000000100A0A2A8A0A0D0080400848180000001022A2A2A2A2A2A2A2A55555555555555552A2A2A2A2A2A2A2A55555555555555552A2A2A2A2A2A2A2A55555555555555552A2A2A2A2A2A2A2A000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000AAAAAAAAAAAAAAAAD5D5D5D5D5D5D5D5AAAAAAAAAAAAAAAAD5D5D5D5D5D5D5D5D5D5D5D5D5D5D5D5AAAAAAAAAAAAAAAAD5D5D5D5D5D5D5D5AAAAAAAAAAAAAAAA7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F7F003F3F3F007B7B7B003F3F3F007B7B7B003F3F3F00777777003F3F3F00777777000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000007F7F7F7F7F7F7F7F000000000000000000000000000000000000000000000000000000000000000000000000550C7E03000000002A000F18780C0C70000000001F101F1100000000010306065706661E000000002A00030C060E3646000000001818180700000000000000005500780C000000002A03070C060608700000000000000C07000000000000000055007018040C18183A181B1E0C04187000000000181E1B19000000000000000055407E02000000002A0103061C06027C00000000000C070100000000780C18307D70707003060C002B000000707060400000000000000000000000000000000055187C06000000002A000C13067E037E0060180603000E1330190E0002060C0C5D0C4C7C000000002A000F101C0C0C0C00000000301C0E03000000006070600055006060010301002A000101606060400000000001010101000000006070600055006060010301002A0001016060606060261C000101010100000000010306065706661E000000002A00030C06660606000000000F030F3C000000001030606075606060000001012A010101606060400000000001010101000000000000000055001E63000000002A0C0F116303060C000000003030180C000000000000000055004676000000002A0007181E06064600000000180E070100000000000000005500703C000000002A030F100E03027C00000000301C0F03000000000000000055004676000000002A0007081E061E660606060018180E03000000000000000055007844000000002A00181B06061C78000000001E181E19181818000000000055004676000000002A0007081E060606000000000C040000000000000000000055007C03000000002A30331C7E40077C0000000000070C030000000000040C0C7F0C0C0C000000002A0000000C0C48700000000000060300000000000000000055060606000000002A00383806060C780000000038383621000000000000000055000718000000002A3030300C06186000000000300C030000000000000000005500301C000000002A30303006466638000000003030190E00000000000000005500000E000000002A38381C38703C060000000007010E380000000000000000550C0C0C000000002A0020300C18306006037C0038383837301C0F0000000000550C7F00000000002A003F18004E314E000000000601380F000000000000000055607008000000002A00070C0C0C18700000000018180807000000000000000055006060000000002A0000006060606000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000040604000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000550000000000000000000000000000000000000000000000000000000000000055307C06000000002A00030E7C00007C0000000019180C07000000000000000055000000000000002A0000000040604000006000000307070603000000000000550000000000000000000000004060400000000000030703000000000000000055000000000000002A000000780000000000000007000000000000000000404040404040020303030303030300406040000000000003070300000000701C070000607070030E1C0C070100000070787000000000000001000000000000000C4E424E0000000003030003000000000000000000000000000000000000000030704070000000000C1C101C000000000000000000000000000000000000000000006030181800000601000000001838706000000000000000010300000000000030604000000000000001030706000000402018000006060301000000000000000055607C66000000002A00070C667C60667C60000000070C0C07000000400000000000426A01070E0E0E0F0703682414050100000001010500000000000000000000000000000000000000000000000000000000000000000000000000C1C400C580C4C100A08800A8000C183000031F734000000030303018070000000000000040701C0C000000A001070E1C06464E7E7C7C70401F7F7F7F1F1F0F030000C0D0D495959500AA828090808480D5D4D00000000800908082AA00110155A0A88A82828AA8A08594D0C0C0D09485A0A88888A8A0000085949090948500000095D0C0C00082A0000000828AAAAAAA00C0D0950008002AAA8A820000011101202220828A8888A0150004000094D1D0A088888A8208002AD0D1940000011101202220000094D0C015000400008A8200C1C4C195C1C4C190A088A0AAA088A082A0A88A82828AA8A08594D0C0C0D09485A0A88888A8A000008594909094850000280020000094D0C005440400008A8200C1C4C195C1C4C190A088A0AAA088A0822800200000A88282054404C0D09091848282A80000000800849190D0C01101550000000055400000000000A000020C30000000000000000060407C4261130C0000000000000000A0000000C0D0948581A88888A000000080000094D1D0D09485000000828AA8A00000009080C00081850000A88A8A8AA8A0949090850000008100000000000000008594D0C000000000000000000000000000000000C0D09485A0A88A8200000000810000000000000000000000828AA8A0000000000000008100000000000000508594D0C00002022A40404010000000000A0A082000000000A0A88A8200404054818080800000000A50501004000000000202020800000000007F1F007F1F007F007F00007F00007F001F00005F60007F007018007F01007F000000001F00007F207060007C40007F000000000303000F1F007F1F007F1F0000007F00007F00003C007F3E007F7E0000007F00007F000000007F60007F780001007F03007F03000F003F3E007F7C0000000000000101007F1F007F1F007F7F7F00007F00007F7F7F7C006F40000F0F7F03007F7F0078707F7E007F1F007F7F7F01007F00007F7F7F78007F70007F7F0707001F1F007F7F0000000000000000"

    data = binascii.unhexlify(hdata)
    pixel_data = []
    for i in range(120):
        pixel_data.append(show_char(data, i))

    for i in range(0, 120, 2):
        print("\\begin{center}")
        print("\\scalebox{0.8}{")
        print("\\begin{tabular}{@{}rcccccccccccccccccccccccccccccc@{}}")
        print(f" & \\multicolumn{{14}}{{c}}{{Character {i}}} & & \\multicolumn{{14}}{{c}}{{Character {i + 1}}} \\\\")
        for row in range(16):
            print(f"{row} ", end="")
            for sprite in range(i, i + 2):
                for col in range(14):
                    pixel = pixel_data[sprite][row][col]
                    if pixel == ".":
                        print("& \\Cbk ", end="")
                    elif pixel == "B":
                        print("& \\Cbl ", end="")
                    elif pixel == "O":
                        print("& \\Cbo ", end="")
                    elif pixel == "W":
                        print("& \\Cbw ", end="")
                    elif pixel == "G":
                        print("& \\Cbg ", end="")
                    elif pixel == "V":
                        print("& \\Cbv ", end="")
                print("& ", end="")
            print("\\\\")
        print("\\end{tabular}")
        print("}")
        print("\\end{center}")


if __name__ == "__main__":
    app.run(main)
