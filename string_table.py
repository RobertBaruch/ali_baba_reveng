"""Decodes string table."""

import binascii

from absl import app


def print_string(ptr: int, n: int, data: bytes) -> None:
    print(f"{ptr:04X} {n:02X}: {to_string(data)}")


def to_string(data: bytes) -> str:
    text = bytearray(data)
    for i, b in enumerate(text):
        text[i] = b & 0x7F
        if text[i] == 0x0D:
            text[i] = 0x0A
    return text.decode("utf8")


def from_pstr(data: bytes) -> str:
    length = data[0]
    return to_string(data[1 : 1 + length])


def print_multiline_table(ptr: int, hdata: str) -> None:
    data = binascii.unhexlify(hdata)
    n = 0

    # A string continues until a 0-length string is found. Each string is
    # length-data, and is one line.
    while data:
        length = data[0]
        if length == 0:
            print(f"{ptr:04X} {n:02X}: <empty>")
            data = data[1:]
            n += 1
            ptr += 1
            continue
        print_string(ptr, n, data[1 : 1 + length])
        data = data[1 + length :]
        ptr += 1 + length


def print_table(ptr: int, hdata: str) -> None:
    data = binascii.unhexlify(hdata)
    n = 0

    while data:
        length = data[0]
        if length == 0:
            print(f"{ptr:04X} {n:02X}: <empty>")
        else:
            print_string(ptr, n, data[1 : 1 + length])
        data = data[1 + length :]
        ptr += 1 + length
        n += 1


def mob_link_str(mob_link: int) -> str:
    if mob_link == 0:
        return "--"
    return f"{mob_link-1:02X}"


def spc_to_font(spc: int) -> int:
    y, a = divmod(spc, 21)
    a += 1
    if a >= 5 or y == 0:
        return a
    return a + 32


def print_mob_stats(mob_names_ptr: int, mob_names_hdata: str) -> None:
    ptr = 0x4C80
    hdata = "805400AB000C080100000010080000008954080000080805000400140900000096540700001212090006000A07000000A6540900000E0E060005000E08000000B3540600000D0D073204000B06000000BF540C0001060904010500540B000000C7540D00011010070108004A09000000CC540B00010D0D060107004D0A000000D5540A00010C0C052306004B08000000DD541100030616030003005408000000E2540E00030818040004005208000000ED541000030A1A052105004F07000000F4540F00030919053205004F06000000FB54040002141A0A000500080500000001551D00021115092104000A0600000007550200020D12073203000D050000000A550300021014084304000A040000000F550084431010090307004E00C800001E550070431010080009000A070F0000235513A8430A0A0500060010070A00002A5524004308080401020010060000A034551C00430A0A050006000A080500803C551E00580A0A05020600060605008049556E00430606030004000E0800008051553BA5430A0A030004000E080A0000575500A7430C0C040003000C070A00005C551992430E0E050105000E061400006A551700430606030204000A0600008075551800430808040105000A070000807B556F00580808040005000C0800008087552100431010080009000A070000A090552600430F0F0701080009070000A09D552500430E0E0702070008060000A0A3550056430D0D060306000904190000B4557B00431414080009000E086400E0B8557300430D0D060007000D080000A0C2557000580C0C060106000C070000A0D1557200430B0B050206000B060A00A0D7557100430A0A0600070010080A00A0E2557400430909050106000F070A00A0EB557C005810100801090010071400E0F1557F00430E0E0700080014081400E0F9557A0043141409000A000A081E00C001563300431010080008000E080A00C006567600430C0C0600070012080A00C00F563100580A0A0600060014083C00C019567800431212090109000A073200C020562D00430C0C060207000E062800C02A568000430D0D060307000F053C00E031567700430A0A050306000E051900C03B567500580A0A050404000C041900C045563200430F0F070108000D071900C04C567900431010080208000A061900C053562700430808040205000E060500A059563500430707040304000D050500A065562800430606030404000C040500A077563600580C0C060007000E080500A07F56226B230A0A05000700580800000088561AAC150A0A040002000C0800000090563D573F0810060005008C00000000A1563E91450303020002004A06000000A9560092450303020002004806000080B25641653F1010080206001000320000C256002D230808000000000F080A0000D256427A3F080804000200CB00000000E65600523F080804000300CA00000000F956007A4E100C04810500520A000000FF560073540B0B0300050086030000800E5746883F08080200040089030000001B57449A3F0D0D0400050087030000002657484D450303020003004D06000084315700473C0505010000004C090000003A57005F4C08060681080009050000004C570081A6121207000400580C000080545700664E0E0E078109000E0A000000585700754C0C0F075307000D0400000061570052501414008108001400320000725700564B1010070005000F08000000815700944F0A0A05040500CA030000009257003F4E0A0A060007004D093200009D57002E441218060008008604000000A6575398450606038104004F06000000AF5754AB450303020002004A060000A0B95700AD4503030200020047060000A0C357561C930A0F0F000F001000000000CC574044930A0F0F000F001000000000D657591C4A0F0F050000000E00000000E857001E4A0F0F080000000700000000F8575B55450808048104004C060000C00058585A450A0A0582060048060000C00A585A5E450909048104004A060000C01558007C610C0C088208000B0600000024580087460E0E068108000C0A6400C02D585D9944141E09820B00C5040000C03A580067471F300C850800891C2C0100475800715F05050800010022000000005858009047101007810400CA0A6400006A5800874A010A070002000D000000007A5800874816180300080007030000008358663F5E050A0304030011132800A09058675C5E050A0304030011051900A09F58657F5E050A0304030011072300A0AC5800883C0506010001000E09000000BA58004C481014050006000D02000000C05800584D0A0A010009000E15640000C958005E50141E0A0004008B00FA0000DC580070481F1002830800CB04000000EF58006250141408820A000C192C0100FF58007B50181809830B000E37EE0200085916003C0808010001000E0C00008011591F003C04040000000007080000801A592000940A0A0501060050090000A02559380094080804000600540B0000A02C5915003C0606020002000F0C0000A0375939009E080C060004004C050000A047593700930E0E090306000B060000A04F5934003C0707020003000E0C0000C05D592B0044141406830800CA040000C068592F0059101004820600CA060000C073592E00411212090004000C060000C079593000411212090104000A050000C07E592C00A6121207810500540A0000C083597E00A61414088205005A090000E089592A003C0404010001000F080000E0935929009B1F300C830800CD0D0000E0A0590000651216068108000B080000E0B3592300501015088309000D0A0000E0C4597D0050101405000400CA070000E0"
    data = binascii.unhexlify(hdata)
    mob_names_data = binascii.unhexlify(mob_names_hdata)
    n = 0

    while data:
        mob_data = data[:16]
        data = data[16:]
        name_ptr = int.from_bytes(mob_data[:2], "little")
        rel_offset = name_ptr - mob_names_ptr
        name = from_pstr(mob_names_data[rel_offset:])
        # SPC is used for the mob's sprite index: 0-21 = 0-21
        print(
            f"{ptr:04X} {n:02X}:"
            f" MOB {mob_link_str(mob_data[2])}"
            f" POS {pos_to_col_row(mob_data[3])}"
            f" SPC {mob_data[4]:02X} ({spc_to_font(mob_data[4]):02X})"
            f" STR {mob_data[5]:02X}"
            f" CON {mob_data[6]:02X}"
            f" MEL {mob_data[7]+1:02X}"
            f" [8] {mob_data[8]:02X}"
            f" HTH {mob_data[9]+1:02X}"
            f" [A] {mob_data[10]:02X}"
            f" DEX {mob_data[11]+1:02X}"
            f" SPD {mob_data[12]:02X}"
            f" [D] {mob_data[13]:02X}"
            f" [E] {mob_data[14]:02X}"
            f" [F] {mob_data[15]:02X}"
            f" {name}"
        )
        n += 1
        ptr += 16

def pos_to_col_row(pos: int) -> str:
    col, row = divmod(pos, 20)
    return f"{col:02d},{row:02d}"

def print_room_stats(room_names_ptr: int, room_names_hdata: str) -> None:
    ptr = 0x4009
    hdata = "40420181C1011E45014E4200438B0127450059423F00BB01424500694200074C015D450077424A03C425784500884251007229AB450092425264C229CF45009C425F52BD49DE4500A8426059C449ED4500BB4200026049114600CB420001B7603E4600D14200179561564600E4426A03C4628C4600F7425C67BC482247000B435703744834470016435E6FC44843470029434300C104554700304300219F048E470041436B14AE64A947004E436C19B365D0470060430003C421EB47006D43621EB2401848006F43001A96462D480080436315B2414548008243006DC16060480094436415B2427248009743002BAF22814800A4430015B243CF4800A6431B54C105EA4800B74347146305F94800C5434515B202204900D8436815B244444900DA4300074A60624900ED436915B245864900EF4355026020954900F6436115AA40A14900F84300407206C5490007440006BE47D7490016446D3CBB63F849002544007FC463074A003644000B8863194A004644001447633D4A0058443A18A926494A005E444B14A426554A006244001DAE26644A0068444C22B326734A0071441250C427824A007D4400006027944A0089440023B324B84A009244001FAF24CA4A009944001CAB24DC4A00A1444E18A824EB4A00A7444D14A424FA4A00AE44000260200C4B00B5444F66C420214B00BC444902C407334B00C9443C18AD037B4B00DB44000EC428934B00E444007EC228AB4B00F444003CB628C64B00FF4450028628DE4B000C451403C4230E4C00FFFF"
    data = binascii.unhexlify(hdata)
    room_names_data = binascii.unhexlify(room_names_hdata)
    n = 0

    while len(data) >= 9:
        room_data = data[:9]
        data = data[9:]
        name_ptr = int.from_bytes(room_data[:2], "little")
        rel_offset = name_ptr - room_names_ptr
        name = from_pstr(room_names_data[rel_offset:])
        print(
            f"{ptr:04X} {n:02X}:"
            f" MOB {mob_link_str(room_data[2])}"
            f" TL {pos_to_col_row(room_data[3])}"
            f" BR {pos_to_col_row(room_data[4])}"
            f" [5] {room_data[5]:02X}"
            f" DAT {int.from_bytes(room_data[6:8], "little"):04X}"
            f" [8] {room_data[8]:02X}"
            f" {name}"
        )
        n += 1
        ptr += 9


def main(argv: list[str]) -> None:
    if len(argv) > 1:
        raise app.UsageError("Too many command-line arguments.")

    print("===== Messages at 9AA6 ====================================")
    ptr = 0x9AA6
    hdata = (
        "0021D4C8C5A0C4CFCFD2A0C3D2C5C1CBD3A0C2D5D4A0D2C5CDC1C9CED3A0D3C8"
        "D5D4AE0015D4C8C5A0C4CFCFD2A0D3D7C9CEC7D3A0CFD0C5CEA10014C9CED3C5"
        "D2D4A0C1CCC9A0C2C1C2C1A0C4C9D3CB0014C8C1C8A1A0CAD5D3D4A0C1A0D3C3"
        "D2C1D4C3C8A10005CFD5C3C8A10007C1C1C1D2C7C8A1000BC1C9C9D9C5C5C5C5"
        "C5A1A1001CCFC8A0CDC1ACA0C9A0D4C8C9CECBA0C9D4A7D3A0CDD9A0D4C9CDC5"
        "AE001FC6C1CCCCD3A0D5CEC3CFCED3C3C9CFD5D3A0D4CFA0D4C8C5A0C6CCCFCF"
        "D2AE0017C9D3A0C6C5C5CCC9CEC7A0D2C1D4C8C5D2A0D7C5C1CBAE001DD3D4C9CCCCA0C8C1D3A0CCCFD4D3A0CFC6A0C6C9C7C8D4A0CCC5C6D4AE001AD3CDC1D3C8C5D3A0C9CED4CFA0C1A0D3CFCCC9C4A0D7C1CCCCAE001CC3C8C1D2C7C5D3A0C9CED4CFA0C1A0D3D4CFCEC5A0D3D4C1D4D5C5AE001FC4C5D0C1D2D4D3A0D4C8C5A0CCC1CEC4A0CFC6A0D4C8C5A0CCC9D6C9CEC7AE0010C3CFCEC7D2C1D4D5CCC1D4C9CFCED3A118D9CFD5A0C1D2C5A0C9CEA0D4C8C5A0CDCFD5CED4C1C9CEAE17C9A0C8C1D6C5A0D3C8CFD7CEA0D9CFD5A0C4CFCFD2D3AC1CD7C5C1CCD4C8A0C1CEC4A0D4D2C1C4C9CEC7A0CFD5D4D0CFD3D4D3AE21CECFA0CCCFCEC7C5D2A0D3C8C1CCCCA0C9A0D0CFC9CED4A0D4C8C5CDA0CFD5D4AE18AEA0AEA0AEA0A0D4C8C5A0C6D2C9C5CEC4CCD9A0CDC1C7C5001FC1A0CCC9D4D4CCC5A0D2CFC3CBA0C3D2C1C3CBD3A0C1CEC4A0C6C1CCCCD3AE001CC1A0C8C5C1D6D9A0D0C9C5C3C5A0CFC6A0D2CFC3CBA0C6C1CCCCD3AC0DCBCECFC3CBC9CEC7A0C4CFD7CE0019C1A0C2C9CCCCCFD7C9CEC7A0C3CCCFD5C4A0CFC6A0C4D5D3D412C5CED6C5CCCFD0D3A0D4C8C5A0D7C1CCCCAE001AD4C8C5A0D3C3D5CCD0D4D5D2C5A0D4CFD0D0CCC5D3A0CFD6C5D217C1CEC4A0C3D2D5CDC2CCC5D3A0C9CED4CFA0C4D5D3D4AE0020C2D5D4A0CECFD4C8C9CEC7A0C9CED4C5D2C5D3D4C9CEC7A0C8C1D0D0C5CED3AE0019C1D3A0D3CFCFCEA0C1D3A0C9D4A0C9D3A0D4CFD5C3C8C5C4AC18D4C8C5A0C9CCCCD5D3C9CFCEA0C4C9D3C1D0D0C5C1D2D3A1001BD4C8C1D4A7D3A0CECFD4A0C1A0D3C3C5CEC1D2C9CFA0C4C9D3CBA10022D7C8CFD3C5A0D4CFD5C7C8A0C8C9C4C5A0D3CFC6D4C5CED3A0D4C8C5A0C2CCCFD7AE0025D7C8CFD3C5A0C1D2CDCFD2A0D4C1CBC5D3A0D3CFCDC5A0CFC6A0D4C8C5A0C9CDD0C1C3D4AE0020D7C8CFACA0D5CEC8C1D2CDC5C4ACA0C7D2CFD7CCD3A0CFCDC9CECFD5D3CCD9AE0014D7C8CFA0C3C8CFD2D4CCC5D3A0CDC5D2D2C9CCD921C1D3A0D4C8C5A0C1D2CDCFD2A0D4C1CBC5D3A0D4C8C5A0C6D5CCCCA0C2CCCFD7AE000FC4C9D3CBA0C9AFCFA0C5D2D2CFD2A1001AC2D2C5C1CBD3A0C6D2C5C5A0CFC6A0D4C8C5A0C6D2C1C3C1D3AE001FC6C1C9CCD3A0D4CFA0C5D3C3C1D0C5A0C6D2CFCDA0D4C8C5A0C5CEC5CDD9AE001AC6C1C9CCD3A0D4CFA0D4C1C3CBCCC5A0D4C8C5A0C5CEC5CDD9AE001ACCC5C1D0D3A0C9CED4CFA0C1A0C6CCD9C9CEC7A0D4C1C3CBCCC51AC1CEC4A0D7D2C5D3D4CCC5D3A0D7C9D4C8A0D4C8C5A0C6CFC5AE000FC9D3A0D5CEC3CFCED3C3C9CFD5D3AE001DC6C5C5CCD3A0D3D4D2CFCEC7C5D2A0C1C6D4C5D2A0D2C5D3D4C9CEC7AE0020D3D4D2D5C7C7CCC5D3A0C2C1C3CBA0D4CFA0C3CFCED3C3C9CFD5D3CEC5D3D3AE0015D0CCC5C1D3C5A0C5CED4C5D2A0C1A0CED5CDC2C5D20DC6D2CFCDA0B1A0D4CFA0B2B4AE0022D9CFD5A0D3C1D6C5C4A0CDC5A0C6D2CFCDA0CDD9A0C9CDD0D2C9D3CFCECDC5CED4AC0023C9CEA0C7D2C1D4C9D4D5C4C5A0C9A0C1CDA0D9CFD5D2D3A0D4CFA0C3CFCDCDC1CEC4AE000AD4C8C1CECBA0D9CFD5AE001ED3C8D5C6C6CCC5D3A0CFC6C6A0D4C8C9D3A0CDCFD2D4C1CCA0C3CFC9CCAE001AC7C9D6C5D3A0C1CEA0CFC2CFCCD5D3A0D4CFA0C3C8C1D2CFCEAE0021D4D5D2CED3A0D4C8C5A0D4CFC5D3A0D5D0A0D4CFA0D4C8C5A0C4C1C9D3C9C5D3AE0028C7CFCCC4A0C5C1D4C9CEC7A0D2CFC3CBA0D3CCC9CDC5A0C7CFC2C2CCC5D3A0D4C8C5A0C3C1D3C8AE001DD9CFD5D2A0D5D3C5C4A0C1D2CDCFD2A0C9D3A0D7CFD2D4C8CCC5D3D3AE0027C1CCCCA0D4C8C5A0C7CFCCC4A0D3C9CECBD3A0C9CED4CFA0D3CFCDC5A0D1D5C9C3CBD3C1CEC4AE0028D3CFCDC5A0C7CFCCC4A0C6C1CCCCD3A0D4C8D2D5A0C8CFCCC5D3A0C9CEA0D4C8C5A0C6CCCFCFD2AE0011D9CFD5A0C8C1D6C5A0CECFA0C7CFCCC4A10019CDCFD6C5A0D7C9D4C8A0D4C8C5A0CACFD9D3D4C9C3CBA0CFD219D0D2C5D3D3A0C2D5D4D4CFCEA0C6CFD2A0CFD0D4C9CFCED3AE001AD0D2C5D3D3A0C1CED9A0CBC5D9A0D4CFA0C3CFCED4C9CED5C5AE001CD3CFD2D2D9ACA0C2D5D4A0D9CFD5A0C1D2C5A0D4CFCFA0D0CFCFD2AE00001CD0CCC5C1D3C5A0C9CED3C5D2D4A0D3C3C5CEC1D2C9CFA0C4C9D3CBAE0017D7C8CFACA0D5CEC1D7C1D2C5A0CFC6A0C4C1CEC7C5D2AC1AC5D3C3C1D0C5D3A0D4C8C5A0C2CCCFD7A0D5CEC8C1D2CDC5C4AE0011C5CECFD5C7C8A0C9D3A0C5CECFD5C7C8A11CCECFA0CDCFD2C5A0D0CCC1D9C5D2D3A0C1D2C5A0C1CCCCCFD7C5C4AE000012D9CFD5A0C8C1D6C5A0CECFA0C1D2CDCFD2A10022D0D2C5D3D3A0D3D0C1C3C5A0C2C1D2A0D4CFA0D5D3C5A0CBC5D9C2CFC1D2C4A0CFD220CACFD9D3D4C9C3CBA0C2D5D4D4CFCEA0D4CFA0D5D3C5A0CACFD9D3D4C9C3CBAE0000001FC3C1CEA0CECFD4A0D2C5C1C4A0D3C3C5CEC1D2C9CFA0C6D2CFCDA0C4C9D3CB18D0D2CFC7D2C1CDA0D7C9CCCCA0CECFD7A0C3D2C1D3C8A1A1000000FF"
    )
    print_multiline_table(ptr, hdata)
    print("===== Room names at 4240 ====================================")
    ptr = 0x4240
    room_names_hdata = "0DC1CCC9A0C2C1C2C1A0C8CFCDC50AC4D5D3D4D9A0D2CFC1C40FD3D5CCD4C1CEA7D3A0D0C1CCC1C3C50DD2CFD9C1CCA0CCC9C2D2C1D2D910C1D3D4D2CFCCCFC7C5D2A7D3A0CCC1C209C2C5C1D2A0C3C1D6C509D2C1D4D3A0CEC5D3D40BC4D2C1C7CFCEA0CCC1C9D212C7CFCCC4A0C6CFD2A0D4C8C5A0CCD5C3CBD90FD3C1D6C5A0D4C8C5A0D7C8C1CCC5D305D3CCC9C4C512C4C5C5D0A0C4C1D2CBA0D3D4C1C9D2D7C1D912CDC9CECFD4C1D5D2A0CCC1C2D9D2C9CED4C813D3D4C9CEC7C5D2A0D3D4D2C5D7CEA0C3C5CCCC0AC7D5C1D2C4A0D2CFCFCD12CCCFCEC7A0D7C1D9A0C6D2CFCDA0C8CFCDC506C6CFD2C5D3D410D6C9C5D7A0C6D2CFCDA0C1A0D4D2C5C50CC6C1C9CCC9CEC7A0D7C1CCCC11CDC9CECFD4C1D5D2A0D0CCC1D9D2CFCFCD0CD4C8C9C5D6C5D3A0C3C1D6C501CF10D3D0C9D2C1CCA0D3D4C1C9D2C3C1D3C501D911CDC1C7C9C3A0D4CFD5D2C2C9CCCCC9CFCE02C7AE0CC3D2D9D3D4C1CCA0C3C1D6C501C210D4C8C9C5D6C5D3A0C3CCC5C1D2C9CEC70DCFCCC4A0CDC9CEC5A0D2CFC1C412C6CFCFD4C8C9CCCCD3A0C3C5CDC5D4C5D2D901C912D5CEC4C5D2C7D2CFD5CEC4A0D3D4D2C5C1CD01D606C7C5CDC9CEC901D20ECFCCC4A0CDC9CEC5A0D3C8C1C6D40EC7C9CCC4C5C4A0D0C1D4C8D7C1D90ECDC9CECFD4C1D5D2A7D3A0C4C5CE10CDC9CECFD4C1D5D2A7D3A0D6C1D5CCD40FC9CECEC5D2A0D3D4C1C9D2C3C1D3C511D3C5C3D2C5D4A0D0C1D3D3C1C7C5D7C1D905D6C9D2C7CF03CCC5CF05CCC9C2D2C108D3C3CFD2D0C9D5D30BD3C1C7C9D4D4C1D2C9D5D30BC3C1D0D2C9C3CFD2CED5D308C1D1D5C1D2C9D5D306D0C9D3C3C5D307C8C1CCCCD7C1D905C1D2C9C5D306D4C1D5D2D5D306C7C5CDC9CEC906C3C1CEC3C5D20CD4C8C5A0CDCFD5CED4C1C9CE11D3C8C1C8D2C9C1D2A0D4D2C5C1D3D5D2D908C1C9D2A0D6C5CED40FC4C5D3C5D2D4C5C4A0D4D5CECEC5CC0AD2CFD9A0C7AEA0C2C9D60CCAC1C3CBC1CCA0C1CCD4C1D211C1D3D4D2CFCCCFC7C5D2A7D3A0CDC1DAC5"
    print_table(ptr, room_names_hdata)
    print("===== Messages at 7BDB ====================================")
    ptr = 0x7BDB
    hdata = "17C3CFCED4C9CED5C5A0C7C1CDC5A0CED5CDC2C5D2A0CECE0EC2C5C7C9CEA0CEC5D7A0C7C1CDC526D5D3C5A0D0D2C5D6C9CFD5D3CCD9A0C6CFD2CDC1D4D4C5C4A0D3C3C5CEC1D2C9CFA0C4C9D3CB20C6CFD2CDC1D4A0C1CEC4A0D5D3C5A0CEC5D7A0D3C3C5CEC1D2C9CFA0C4C9D3CB0EC3C1CEC3C5CCA0D2C5D1D5C5D3D410C1D4D4C1C3CBA0C1C2CFD6C5A0D9CFD50BC1D4D4C1C3CBA0CCC5C6D40CC1D4D4C1C3CBA0D2C9C7C8D410C1D4D4C1C3CBA0C2C5CCCFD7A0D9CFD51BC1D4D4C1C3CBA0B5E9BCA5A0D3C9C2C3CDA0A0D4B1A0A0A0A0A0C913C1D4D4C1C3CBA0D3CFCDC5CFCEC5A0C5CCD3C50DC3C1CEC3C5CCA0C1D4D4C1C3CB06CDC9D3D3C5D317C4D5C3C1D4D3A0D4CFA0C4D2CFD0A0BAA0A0B4CCA0BAB00DCBC5C5D0A0C1CCCCA0C7CFCCC4"
    print_table(ptr, hdata)
    print("===== Mob names at 5480 ====================================")
    ptr = 0x5480
    mob_names_hdata = "08C1CCC9A0C2C1C2C10CD3C3C8C5C8C5D2C1DAC1C4C50FC8C1D2CFD5C4A0C5CCADCCC1D2C7C50CC2C1C9D2C1CDA0CDC5C4C9CF0BC1C2CFD5A0C8C1D3D3C1CE07CCD5D4C8C9C5CE04C8D5C1CE08C3C5CCC5C7CFD2CD07C3D5D2D5C6C9CE04C5CCC4CF0ACDC5D2D2D9D7C1D4C5D206D3D4C9CCC2CF06C3C9CEC4C5D205CAC1D4D4C505D4C8CFD2C102CFC704D5CCD6C10EC3CFC7C9C1A0C8CFD5D3D3C1C9CE04CFCDC1D206CDC1C8CDD5C409C1C2D5CCADC6C1D4C807C9C2D2C1C8C9CD0CCAC1CCC1CCADD5C4ADC4C9CE07D3C1CCC1CDC1CE05C1C2D3C1CC04CAC1CDC90DCEC9DAC1CDA0D5CCA0CDD5CCCB0AC1CCD0A0C1D2D3CCC1CE05CDC1CCC9CB0BD4CFC7C8D2D5CCA0C2C5C708CDCFD7C1C6C6C1CB0CC1C2C4ADD5D3ADD3C1CDC1C405C8C1CBC9CD10C8C1D3C1CEA0C2C5CEA0D3C1C2C2C1C803C1CCC909CBC8CFD2C1D3D3C1CE0ECBC8D7C1CAC1C8A0CEC9DAC1CDC905C8C1C6C9DA0ACAC5CCC1CCD5C4C4C9CE08CBD7C1C4D2C1C3C805C1D4D4C1D207D0C5C8CCC5D6C907CAC1CDD3C8D9C404C9D2C1CD08CBC1C9CBCFC2C1C409CBC1C9CBC8CFD3D2D506D2D5D3D4D5CD09C8C1D4C9CDA0D4C1C906C2C1C8D2C1CD09C4C9CEC1D2DAC1C4C509D3C8C1C8DAC5CEC1CE06C4CFD5C2C1CE06C6C5D2CFDAC505C1C8CDC5C40BD0C5D2C9C5A0C2C1CECFD511C8C1D2CFD5CEA0C1CCADD2C1D3C3C8C9C407C3CFC4C1C4C1C408CDCFD2C7C9C1CEC107C1C2C4C1CCCCC110C5CEC3C8C1CED4C5C4A0D3D4C1D4D5C507D4C1CEA0D2C1D408C7D2C1D9A0D2C1D40FD3D5CCD4C1CEA0D3C8C1C8D2C9C1D20FD0D2C9CEC3C5D3D3A0C2D5C4C4C9D213D3D5CCD4C1CED3A0D2C9C7C8D4A0C7D5C1D2C412D3D5CCD4C1CED3A0CCC5C6D4A0C7D5C1D2C405D4C9C7C5D20ED7C9D4CCC5D3D3A0DACFCDC2C9C50CD3CDC1CCCCA0DACFCDC2C9C50AC2C9C7A0DACFCDC2C9C50AC3C1CCC9C3CFA0D2C1D408C8CFCFD4A0CFD7CC11CDCFD5CED4C1C9CEA0D3C3CFD2D0C9CFCE07D5CEC9C3CFD2CE03CCC5CF08D3C3CFD2D0C9D5D310D3D4C1D4D5C5A0CFC6A0D4C1D5D2D5D30EC1D2C9C5D3ACA0D4C8C5A0D2C1CD10C3C1CEC3C5D2ACA0D4C8C5A0C3D2C1C20AD7C5D2C5CAC1C3CBC1CC08C3C1D6C5C2C5C1D208C3C1D6C5A0D2C1D409C2D2CFD7CEA0D2C1D409C2CCC1C3CBA0D2C1D408C7C5CDC9CEC9A0C909C7C5CDC9CEC9A0C9C911D3D7CFD2C4A0CFC6A0C4C1CDCFC3CCC5D30FD4D7CFA0C5C4C7C5C4A0D3D7CFD2C407D7C5D2C5D2C1D409D3C5D7C5D2A0D2C1D40ACAD5CEC7CCC5A0D2C1D40EC7C9C1CED4A0D3C3CFD2D0C9CFCE08D7C5D2C5D7CFCCC60CC7D2C9DADACCD9A0C2C5C1D20CC7D2C5C5CEA0C4D2C1C7CFCE10CDC5C3C8C1CEC9C3C1CCA0D3D7CFD2C411D6C5D2D9A0D9CFD5CEC7A0C4D2C1C7CFCE0FC5CEC3C8C1CED4C5C4A0D3D7CFD2C408D4C8C5A0C2CCCFC20CD3D5CEA0D7C1CEC4C5D2C5D20EC5C1D2D4C8A0D7C1CEC4C5D2C5D20CD3CBD9A0D7C1CEC4C5D2C5D20DCCCFD3D4A0C2C1D2CEA0CFD7CC05D3CCC9CDC508D3D5C3C3D5C2D5D312D3D4C1D4D5C5A0CFC6A0CDC9CECFD4C1D5D212CFCFDAC9CEC7A0D3D4C5CEC3C8C2C5C1D3D40FD3CFCEA0CFC6A0CDC9CECFD4C1D5D208CDC9CECFD4C1D5D208C2C1D2CEA0CFD7CC08C2C1C2D9A0CFD7CC0AC7C1CEC1C4D2C9CEC9CC06CCC9D3D3CFCD0AC4CFC3D4CFD2A0D7C8CF0FC2C1CEC5A0CFC6A0D4C8C9C5D6C5D307C1CCC1C4C4C9CE0DD2C9CEC7A0C5D9C5C4A0CFD7CC0AC2CCC1C3CBA0C2C5C1D20AC2D2CFD7CEA0C2C5C1D205D7C1D5CBC104D4D2CFC704CEC5CCCC05C5D1D5D5D309D7C8C9D4C5A0CFD7CC0CD7C8C9D4C5A0C4D2C1C7CFCE12D3CFCECED9A0C2CFD9A0CDC9CECFD4C1D5D210C4C1D5CED4CCC5D3D3A0CDC9CECEC9C504C2D5CCCC"
    print_table(ptr, mob_names_hdata)

    print("===== Leftover source code from uninitialized data at 59C9 =========")
    ptr = 0x59C9
    hdata = "D3D4C1A0C1D2C78DA0CCC4C1A0A3BED3CCC6D3D0C48DA0D3D4C1A0D4C5CDD08DA0CCC4C1A0A3BCD3CCC6D3D0C48DA0D3D4C1A0D4C5CDD0ABB18DA0CAD3D2A0D3C8CFD7CECD8DA0CCC4D9A0A3B1B18DA0CCC4C1A0A8C1C3D4CFD2A9ACD98DA0C1CEC4A0A3A4B1C68DA0D3D4C1A0C1D2C78DA0CCC4C1A0A3BED3CCC6C4D88DA0D3D4C1A0D4C5CDD08DA0CCC4C1A0A3BCD3CCC6C4D88DA0D3D4C1A0D4C5CDD0ABB18DA0CAD3D2A0D3C8CFD7CECD8DA0CCC4D9A0A3B1B38DA0CCC4C1A0A8C1C3D4CFD2A9ACD98DA0D3D4C1A0C1D2C78DA0C9CED98DA0CCC4C1A0A8C1C3D4CFD2A9ACD98DA0D3D4C1A0C1D2C7ABB18DA0CCC4C1A0A3BED3CCC6C4D5C38DA0D3D4C1A0D4C5CDD08DA0CCC4C1A0A3BCD3CCC6C4D5C38DA0D3D4C1A0D4C5CDD0ABB18DA0CAD3D2A0D3C8CFD7CECD8DA0CCC4C1A0D3CCC6C4D5C3AB"
    print_string(ptr, 0, binascii.unhexlify(hdata))

    print("===== Mob data ====================================")
    print_mob_stats(0x5480, mob_names_hdata)

    print("===== Room data ====================================")
    print_room_stats(0x4240, room_names_hdata)


if __name__ == "__main__":
    app.run(main)
